#include "sys_tick_cfg.h"

//---变量定义
SYS_TICK_HandleType			g_sys_tick_one = { 0 };
pSYS_TICK_HandleType		p_sys_tick_one = &g_sys_tick_one;

///////////////////////////////////////////////////////////////////////////////
//////函		数:
//////功		能: 滴答初始化函数
//////输入参	数:
//////输出参	数:
//////说		明:
//////////////////////////////////////////////////////////////////////////////
uint8_t sys_tick_init(SYS_TICK_HandleType *systickx)
{

	return OK_0;
}

///////////////////////////////////////////////////////////////////////////////
//////函		数:
//////功		能: 中断滴答任务函数
//////输入参	数:
//////输出参	数:
//////说		明:
//////////////////////////////////////////////////////////////////////////////
uint8_t sys_tick_it_irq_handle(SYS_TICK_HandleType *systickx)
{
	//--->>>递加计数器，用于系统节拍
	systickx->msg_inc_count++;
	if (systickx->msg_inc_count==0)
	{
		//---溢出标志位
		systickx->msg_inc_ovf++;
	}
	//---<<<递加计数器，用于系统节拍

	//--->>>递减计数器，用于ms
	if (systickx->msg_dec_count!=0)
	{
		systickx->msg_dec_count--;
	}
	//---<<<递减计数器，用于ms

	//--->>>任务队列，用于简单的任务执行
	
	//---<<<任务队列，用于简单的任务执行
	return OK_0;
}


///////////////////////////////////////////////////////////////////////////////
//////函		数:
//////功		能: 获取递增计数器的溢出
//////输入参	数:
//////输出参	数:
//////说		明:
//////////////////////////////////////////////////////////////////////////////
uint32_t sys_tick_get_inc_ovf(SYS_TICK_HandleType *systickx)
{
	return systickx->msg_inc_ovf;
}

///////////////////////////////////////////////////////////////////////////////
//////函		数:
//////功		能: 获取递增计数器的值
//////输入参	数:
//////输出参	数:
//////说		明:
//////////////////////////////////////////////////////////////////////////////
uint32_t sys_tick_get_inc_count(SYS_TICK_HandleType *systickx)
{
	return (systickx->msg_inc_count + 5);
}

///////////////////////////////////////////////////////////////////////////////
//////函		数:
//////功		能: 获取递增计数器的值
//////输入参	数:
//////输出参	数:
//////说		明:
//////////////////////////////////////////////////////////////////////////////
uint32_t sys_tick_get_tick(void)
{
	return sys_tick_get_inc_count(SYS_TICK_TASK_ONE);
}